<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layouts/account_layout}"
      layout:fragment="Content">
  <head>
    <meta charset="UTF-8" />
<title>전자세금계산서</title>
    <style>
    
      /* 버튼 고정 */
      .button-group {
        display: flex;
        gap: 5px; /* 버튼들 사이 간격 */
        font-size: 18px;
        margin-top:20px;
        margin-bottom:10px;
        justify-content: flex-end; /* 버튼을 오른쪽에 정렬 */
      }
      
      /* 전체, 전송중, 전송완료 전체 div */
      .status-count {
        background-color: #f8f9fa;
        padding: 10px;
        border-radius: 4px;
        margin-bottom: 1rem;
      }
      
 	  /* 전체, 전송중, 전송완료 각 div */
      .status-box {
        text-align: center;
        padding: 8px;
        border-right: 1px solid #dee2e6;
      }
      
	/* 전송완료 오른쪽 border X */
      .status-box:last-child {
        border-right: none;
      }
	
	 /* 전체, 전송중, 전송완료 개수 */
      .status-number {
        font-size: 1.4rem;
        font-weight: bold;
        color: #31ce36;
      }
		
	/* 전체, 전송중, 전송완료 한글 표시 */
      .status-label {
        font-size: 1.2rem;
		font-weight: 600;
      }
      
    </style>
  </head>
  <body>
    <div class="container-fluid p-4">
    
      <!-- Search Bar -->
      
      <!-- Status Counters -->
      <div class="row status-count">
        <div class="col status-box">
          <div class="status-number">6</div>
          <div class="status-label">전체</div>
        </div>
        <div class="col status-box">
          <div class="status-number">0</div>
          <div class="status-label">전송중</div>
        </div>
        <div class="col status-box">
          <div class="status-number">5</div>
          <div class="status-label">전송완료</div>
        </div>
      </div>

      <!-- 버튼들이 고정된 위치에 나타나도록 합니다.(오른쪽 상단) -->
      <div class="button-group">
        <button class="btn btn-success">전송</button>
        <button class="btn btn-secondary">인쇄</button>
        <button class="btn btn-secondary">Excel</button>
      </div>

      <!-- Main Table 토스트 UI 그리드 -->
       <div id="grid"></div>
  	   <div id="pagination" class="tui-pagination"></div> <!-- 페이징 ui -->
  	   
      </div>
      
    <script>
    
    // Grid 데이터 정의
    const gridData = [
      {
        date: '2024/11/10',
        clientName: '김치좋아',
        supplyAmount: 100000,
        vat: 10000,
        totalAmount: 110000,
        taxProgress: '완료',
      },
      // 추가 데이터는 여기 삽입
    ];

      // 그리드 초기화
	  const grid = new tui.Grid({
	    el: document.querySelector('#grid'), // 그리드를 표시할 DOM 요소의 id 지정
	    data: gridData, // gridData를 불러와서 그리드로 렌더링
	    scrollX: true,
	    scrollY: true,
	    pageOptions: {
	      useClient: true,
	      perPage: 5,
	    },
	    columns: [ // 각 열의 헤더 이름, 데이터 키, 정렬 가능 여부, 정렬 방향 등을 정의
	        {
	          header: '일자',
	          name: 'date',
	          sortable: true,
	          align: 'center',
	        },
	        {
	          header: '거래처명',
	          name: 'clientName',
	          sortable: true,
	          align: 'left',
	        },
	        {
	          header: '공급가액',
	          name: 'supplyAmount',
	          sortable: true,
	          align: 'right',
	          formatter: 'number', // 숫자 형식으로 표시
	        },
	        {
	          header: '부가세',
	          name: 'vat',
	          sortable: true,
	          align: 'right',
	          formatter: 'number',
	        },
	        {
	          header: '합계금액',
	          name: 'totalAmount',
	          sortable: true,
	          align: 'right',
	          formatter: 'number',
	        },
	        {
	          header: '전자세금계산서 진행단계',
	          name: 'taxProgress',
	          sortable: true,
	          align: 'center',
	        },],
	    rowHeaders: ['rowNum', 'checkbox'], // 왼쪽에 번호 및 체크박스를 표시
	  });

      // 그리드 내 클릭이벤트 -> 추후 내가 필요할 때 수정해서 사용
	  grid.on('click', (event) => {
	    if (event.columnName === 'debentureNo' && event.rowKey >= 0) {
	      console.log('클릭이벤트 발생');
	      console.log(event.rowKey);
	    }
	  });
	  
    
      // 전체, 미전송, 전송완료 클릭하면 해당 정보 표시 기능 (추후 수정해서 사용)
      document.addEventListener("DOMContentLoaded", function () {
        const statusBoxes = document.querySelectorAll(".status-box");

        statusBoxes.forEach((box) => {
          box.addEventListener("click", function () {
            const status = box.querySelector(".status-label").textContent;
            filterByStatus(status);
          });
        });

        function filterByStatus(status) {
          console.log(`${status} 상태의 데이터만 표시합니다.`);
          // 실제 필터링 로직을 추가하여 테이블이나 데이터를 갱신할 수 있습니다.
        }
      });
      
    </script>
  </body>
</html>
