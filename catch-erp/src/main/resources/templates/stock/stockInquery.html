<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layouts/stack_layout}"
      layout:fragment="Content">
	<head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <title>재고조회 및 관리</title>	    	    
	    <link rel="stylesheet" th:href="@{/css/stock/stockInquery.css}" />
	</head>
	<body>
	    <div class="container mt-4">
	        <!-- Header -->
	        <div class="d-flex justify-content-between align-items-center mb-3">
	            <h4>재고조회</h4>
	        </div>
	        <!-- Form -->
	        <div class="card col-md-12">
	          <form class="bg-light p-4 rounded card-body" id="searchForm">
	              <div class="row g-3">
	                  <div class="col-md-12">
	                      <div class="row g-3">
	                          
	                          <div class="col-md-3">
	                              <label class="form-label">거래처</label>
	                              <div class="input-group">
	                                  <input type="text" class="form-control" id="clientInput" name="clientInput">
	                                  <input type="text" style="display:none;" class="form-control" id="clientHiddenInput" name="clientHiddenInput">
	                                  <!-- 거래처 모달 트리거 버튼 -->
	                                  <button type="button" class="btn btn-outline-secondary mBtn" data-bs-toggle="modal" data-bs-target="#clientModal" id="openClientModal"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
	                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
	                                  </svg></button>
	                              </div>
	                          </div>
	                                                
	                          <div class="col-md-3">
	                            <label class="form-label">품목명</label>
	                            <div class="input-group">
	                                <input type="text" class="form-control" id="itemInput" name="itemInput">
	                                <input type="text" style="display:none;" class="form-control" id="itemHiddenInput" name="itemHiddenInput">
	                                <button type="button" class="btn btn-outline-secondary mBtn" data-bs-toggle="modal" data-bs-target="#purchaseOrderModal"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
	                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
	                                  </svg></button>
	                            </div>
	                        </div>
	                      </div>
	                  </div>
	                  
	                  <div class="col-md-6">
	                      <label class="form-label">입력단가</label>
	                      <div class="input-group">
	                          <div class="price-input">
	                              <input type="number" class="form-control" placeholder="0" name="minPrice">
	                          </div>
	                          <span class="input-group-text" style="border:none;">-</span>
	                          <div class="price-input">
	                              <input type="number" class="form-control" placeholder="0" name="maxPrice">
	                          </div>
	                      </div>
	                  </div>
	              </div>
	              <div style="margin-top: 10px;">
	                <button type="button" class="btn btn-primary" id="inqueryBtn">조회하기</button>
	              </div>
	          </form>
	        </div>	
	        	        
	        <!-- 재고조회 및 조정 페이지의 출력 될 Table -->
	        <div class="table-responsive">
	            <div id="wrap">
	                <div id="inqueryGrid"> </div>
	                <div id="pagination" class="tui-pagination"></div>
	            </div>
	        </div>
		        
	    </div>
	    
	    <!-- 거래처 검색 모달 HTML -->
	    
	    <div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
	        <div class="modal-dialog modal-lg">
	            <div class="modal-content">
	                <div class="modal-header">
	                    <h5 class="modal-title" id="modalLabel">거래처검색</h5>
	                   
	                </div>               
	                <div class="modal-body p-0">
	                    <div id="clientGrid">
	                    </div>
	                </div>
	                <div class="modal-footer justify-content-between" >
	                    <p><small>※거래처명을 클릭하여 입력하세요.</small></p>
	                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">닫기</button>
	                </div>
	            </div>
	        </div>
	    </div>
	    
	   	<!-- 상품 검색 모달 HTML -->
	    <div class="modal fade" id="purchaseOrderModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
	        <div class="modal-dialog">
	            <div class="modal-content">
	                <div class="modal-header">
	                    <h5 class="modal-title" id="modalLabel">품목 조회</h5>
	                    
	                </div>
	                <div class="modal-body">                  
	                    
	                    <div id="itemGrid"></div>
	                </div>
	                <div class="modal-footer justify-content-between">
	                   	<p><small>※품목코드를 클릭하여 입력하세요.</small></p>
	                    <div>	                        
	                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal" aria-label="Close">닫기</button>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>	    	   	  	    
	     	    
	    <!-- 거래처 상세(수정) 모달창 -->
		<div class="modal fade" id="itemInfoModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
			    <div class="modal-dialog modal-xl ">
			        <form method="post" th:action="@{/수정/필요}" name="updateItemForm">
			            <div class="modal-content" >
			                <div class="modal-header">
			                    <h5 class="modal-title" id="itemInfoModal">제품 상세</h5>
			                </div>
			                <div class="d-flex flex-wrap">
				                <div class="modal-body col-lg-6 col-sm-12 col-md-12 ">
				                    <ul class="nav nav-tabs" id="itemInfoTabs" role="tablist">
				                        <li class="nav-item" role="presentation">
				                            <button class="nav-link active" id="detail-tab" data-bs-toggle="tab"
				                                data-bs-target="#info" type="button" role="tab" aria-controls="detail"
				                                aria-selected="true">기본</button>
				                        </li>
				                        <!-- 안쓰면삭제 -->
				                        <li class="nav-item" role="presentation">
				                            <button class="nav-link" id="contract-tab" data-bs-toggle="tab"
				                                data-bs-target="#progress" type="button" role="tab" aria-controls="contract-list"
				                                aria-selected="false">상품추이</button>
				                        </li>
				                    </ul>
								
				                    <div class="tab-content mt-3" id="customerTabContent ">
				                        <!-- 상품 상세정보 -->
				                        <div class="tab-pane fade show active" id="info" role="tabpanel"
				                            aria-labelledby="detail-tab">
				                            <input type="hidden" id="clientCode" name="clientCode">
				                            <div class="mb-3 row">
				                                <label for="customerName" class="col-sm-3 col-md-6 col-form-label">거래처명[거래처코드]</label>
				                                <div class="col-sm-6 col-md-6">
				                                    <input type="text" class="form-control" id="clientNameAndCode" name="clientNameAndCode" readonly>
				                                </div>
				                            </div>
				                            <div class="mb-3 row">
				                                <label for="customerName" class="col-sm-3 col-md-6 col-form-label">계약번호</label>
				                                <div class="col-sm-6 col-md-6">
				                                    <input type="text" class="form-control" id="conNo" name="conNo" readonly>
				                                </div>
				                            </div>
				                            <div class="mb-3 row">
				                                <label for="representativeName" class="col-sm-3 col-md-6 col-form-label">품목명</label>
				                                <div class="col-sm-6 col-md-6">
				                                    <input type="text" class="form-control" id="itemName" name="itemName"  readonly>
				                                </div>
				                            </div>
				                            <div class="mb-3 row">
				                                <label for="representativeName" class="col-sm-3 col-md-6 col-form-label">품목코드</label>
				                                <div class="col-sm-6 col-md-6">
				                                    <input type="text" class="form-control" id="itemCode" name="itemCode" readonly>
				                                </div>
				                            </div>
				                            <div class="mb-3 row">
				                                <label for="industry" class="col-sm-3 col-md-6 col-form-label">단가</label>
				                                <div class="col-sm-6 col-md-6">
				                                    <input type="text" class="form-control" id="price" name="price" readonly>
				                                </div>
				                            </div>
				                           
				                            <div class="mb-3 row">
				                                <label for="category" class="col-sm-3 col-md-6 col-form-label">계약 기간</label>
				                                <div class="col-sm-6 col-md-6">
				                                    <input type="text" class="form-control" id="contractPeriod" name="contractPeriod" readonly>
				                                </div>
				                            </div>
											<div>
												<small style="color: green">※창고별 현재 수량</small>
											</div>
				                            <div class="mb-3 row">
				                                <div class="col-sm-6 col-md-6">
				                                    <select class="form-select form-control" id="warehouseType" name="warehouseType" >
				                                    </select>
				                                </div>
				                                <div class="col-sm-6 col-md-6">
				                                	<input type="text" class="form-control" id="currentQuantity" name="currentQuantity" readonly>
				                                </div>
				                            </div>
				                            <div class="row">
				                            	<img src = "#" height="300" width="auto" name="itemImage" class="mb-3">
				                            	<input type="file" id="newImage"> 
				                            </div>
				                        </div>
				
				                        <!-- 두번째 탭 -->
				                        <div class="mb-3 row tab-pane fade" id="progress" role="tabpanel" aria-labelledby="contract-tab">
				                            <!-- 계약품목 탭 내용 -->
				                            <div class="col-sm-9">
				                                <div class="input-group">
				                                	<div>
					                                    <select class="form-select form-control " id="sort-field">
					                                        <option value="conName" selected>계약 명</option>
					                                        <option value="conDate">계약 일자</option>
					                                        <option value="conSdate">계약 시작일</option>
					                                        <option value="conEdate">계약 종료일</option>
					                                        <option value="totalAmount">총 계약금액</option>
					                                        <option value="status">계약상태</option>
					                                    </select>
					                            
					                                    <select class="form-select form-control " id="sort-direction">
					                                        <option value="asc" selected>오름차순</option>
					                                        <option value="desc">내림차순</option>
					                                    </select>
				                           			</div>
				                                    <button class="btn btn-outline-secondary col-sm-6 col-md-6" id="sort-trigger">정렬</button>
				                                </div>
				                            </div>
				                        </div>
										
				                    </div>
				                </div>
								
								<!-- 재고조정내역 그리드 -->
								<div class="modal-body col-lg-6 col-sm-12 col-md-12">
									<div class="row mb-1" >
										<div class="col-sm-3 col-md-3" style="padding-right: 0">
		                                    <select class="form-select form-control" id="warehouseType2" name="warehouseType2" >
		                                    </select>
		                                </div>
		                                <div class="col-sm-3 col-md-3" style="padding-right: 0">
		                                    <select class="form-select form-control" id="tradeType" name="tradeType" >
		                                        <option value="년도" selected>2024</option>
		                                        <option value="년도">2023</option>
		                                    </select>
		                                </div>
	                                </div>
									<div id="adjustmentDetail"></div>
								</div>
								
				            </div>
				            <div class="modal-footer">
				                    <button type="button" id="updateBtn" class="btn btn-success">수정</button>
				                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
				            </div>
			            </div>
			            
			        </form>
			          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControlsNoTouching" data-bs-slide="prev">
					    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
					    <span class="visually-hidden">Previous</span>
					  </button>
					  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControlsNoTouching" data-bs-slide="next">
					    <span class="carousel-control-next-icon" aria-hidden="true"></span>
					    <span class="visually-hidden">Next</span>
					  </button>
			    </div>
			</div>
			
		
		 	    
	     	    
    <!-- 재고조회에 전체적용되는 JS -->
	<script th:src="@{/js/stock/stockInquery.js}"></script>
	</body>
</html>